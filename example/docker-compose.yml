# docker-compose.yml â€” XDC peer monitor
#
# Setup:
#   cd example && cp .env.example .env   # fill in NODE_P2P_KEY
#   docker compose up -d --build
#
# Check:
#   curl localhost:8080/stats | jq .
#   curl localhost:8080/peers | jq .

services:
  rlpx-proxy:
    build:
      context: ..
      dockerfile: Dockerfile
    restart: unless-stopped
    ports:
      - "30301:30301/udp"   # discv4 discovery
      - "30302:30302/udp"   # discv5 discovery
      - "8080:8080"         # HTTP API
    environment:
      - NODE_PRIVATE_KEY=${NODE_P2P_KEY}
      - DISCOVERY_ADDR=:30301
      - DISCOVERY_V5_ADDR=:30302
      - MAX_OUTBOUND=${MAX_OUTBOUND:-100}
      - API_ADDR=:8080
      - BOOTNODES_FILE=/bootnodes.txt
    volumes:
      - ./xdc-bootnodes.txt:/bootnodes.txt:ro
